<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Whack‚Äëa‚ÄëMole ‚Äî Premium (No Images)</title>
  <style>
    :root { --cellMin: 88px; --gap: 16px; }
    body { 
      font-family: 'Trebuchet MS', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; 
      text-align: center; 
      background: linear-gradient(180deg, #e0ffe0, #c6f6c6);
      margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; user-select: none;
    }
    h1 { color: #2b7a0b; margin: 16px 8px 8px; font-size: clamp(1.4rem, 5vw, 2.2rem); }/* HUD */
#hud { display:flex; flex-wrap:wrap; justify-content:center; align-items:center; gap:14px 24px; color:#2b7a0b; padding: 0 12px; }
#hud .item { background:#eaffea; border:1px solid #89df8a; border-radius:10px; padding:8px 12px; }
#hud b { font-weight:800; }

/* Controls */
.controls { display:flex; flex-wrap:wrap; gap:10px; justify-content:center; margin: 8px 12px; }
button { padding: 10px 14px; background:#2b7a0b; color:#fff; border:none; border-radius:10px; font-size:1rem; cursor:pointer; transition: transform .05s, background .2s; }
button:hover { background:#3d9c0f; } button:active{ transform: translateY(1px) scale(.99) }
select, input[type="range"] { padding: 8px 10px; border-radius:10px; border:1px solid #7dd77e; background:#eaffea; }
.scaleWrap { display:flex; align-items:center; gap:8px; background:#eaffea; border:1px solid #89df8a; border-radius:10px; padding: 6px 10px; }

/* Game grid */
#game { display:grid; justify-content:center; gap: var(--gap); margin: 14px auto 20px; padding: 0 10px; max-width: 520px; }
#game.grid.x3 { grid-template-columns: repeat(3, minmax(var(--cellMin), 1fr)); }
#game.grid.x4 { grid-template-columns: repeat(4, minmax(calc(var(--cellMin) - 18px), 1fr)); }

.hole { width:100%; aspect-ratio: 1; background: radial-gradient(circle at 50% 45%, #7a5133 55%, #4a2a16 56%, #30190d 100%); border-radius: 16px; position:relative; overflow:hidden; box-shadow: inset 0 8px 14px rgba(0,0,0,.5), 0 4px 10px rgba(0,0,0,.15); outline:none; cursor:pointer; }
.hole:focus-visible{ box-shadow: 0 0 0 3px #3d9c0f88, inset 0 8px 14px rgba(0,0,0,.5), 0 4px 10px rgba(0,0,0,.15) }

/* PURE CSS MOLE (no external images) */
.mole { position:absolute; left:50%; bottom:-120%; transform:translateX(-50%); width:72%; aspect-ratio: 1/.9; border-radius: 28px 28px 22px 22px / 38px 38px 22px 22px; background: radial-gradient(60% 90% at 40% 15%, rgba(255,255,255,.35), rgba(255,255,255,0) 60%), linear-gradient(180deg, #f0cfa0, #c98e5c 60%, #945f36 100%); box-shadow: inset 0 10px 18px rgba(255,255,255,.25), 0 10px 20px rgba(0,0,0,.35); border: 2px solid rgba(0,0,0,.08); transition: bottom 0.18s ease-out; }
.mole.up { bottom: 6%; }

/* face */
.face { position:absolute; inset: 0; }
.eye { position:absolute; top: 30%; width: 10%; aspect-ratio:1; background:#3b250f; border-radius:50%; }
.eye.left{ left: 32%; } .eye.right{ right: 32%; }
.shine { position:absolute; top: 15%; left: 15%; width: 30%; aspect-ratio:1; background:#fff8; border-radius:50%; }
.nose { position:absolute; top: 44%; left:50%; transform:translateX(-50%); width: 18%; aspect-ratio:1/.8; background:#3b250f; border-radius: 50% 50% 45% 45% / 60% 60% 40% 40%; }
.tooth { position:absolute; top: 62%; left:50%; transform:translateX(-50%); width:18%; height:10%; background:#fff; border-radius: 0 0 4px 4px; box-shadow: 0 2px 0 #0002; }
.paw { position:absolute; bottom:-2%; width:24%; height:18%; background:#c98e5c; border-radius: 50% 50% 30% 30%; box-shadow: inset 0 6px 10px rgba(0,0,0,.15); border:2px solid rgba(0,0,0,.06) }
.paw.left{ left: 14%; } .paw.right{ right: 14%; }

.hitFlash { position:absolute; inset:0; border-radius:inherit; background: rgba(255,255,255,.35); animation: hit .12s ease-out; pointer-events:none; }
@keyframes hit { from{opacity:.9} to{opacity:0} }

/* Overlay */
#gameover { display:none; position: fixed; inset: 0; background: rgba(0,0,0,.7); color:#fff; text-align:center; justify-content:center; align-items:center; font-size: clamp(1rem, 3.5vw, 1.6rem); padding: 18px; }
.panel { background:#1c2e1c; padding: 16px; border-radius:14px; box-shadow: 0 12px 30px rgba(0,0,0,.35); border:1px solid #ffffff22; }
.panel p{ margin: 0 0 10px; }

  </style>
</head>
<body>
  <h1>üêπ Whack‚Äëa‚ÄëMole ‚Äî Premium</h1>  <div id="hud">
    <div class="item">‚è± Time: <b id="timer">30</b>s</div>
    <div class="item">üèÜ Score: <b id="score">0</b></div>
    <div class="item">ü•á High Score: <b id="hiscore">0</b></div>
    <div class="item">üéØ Difficulty: 
      <select id="difficulty">
        <option value="easy">Easy</option>
        <option value="normal" selected>Normal</option>
        <option value="hard">Hard</option>
        <option value="insane">Insane</option>
      </select>
    </div>
    <div class="scaleWrap">
      üì± Size
      <input id="scale" type="range" min="64" max="140" value="88" />
    </div>
  </div>  <div class="controls">
    <button id="startBtn">Start Game</button>
    <button id="restartBtn" style="display:none">Restart</button>
  </div>  <div id="game" class="grid x3" aria-live="polite"></div>  <div id="gameover">
    <div class="panel">
      <p id="finalScore"></p>
      <button id="playAgain">Play Again</button>
    </div>
  </div>  <script>
    const game = document.getElementById('game');
    const scoreDisplay = document.getElementById('score');
    const timerDisplay = document.getElementById('timer');
    const startBtn = document.getElementById('startBtn');
    const restartBtn = document.getElementById('restartBtn');
    const gameoverScreen = document.getElementById('gameover');
    const finalScore = document.getElementById('finalScore');
    const playAgain = document.getElementById('playAgain');
    const hiscoreEl = document.getElementById('hiscore');
    const difficultySel = document.getElementById('difficulty');
    const scaleRange = document.getElementById('scale');

    let score = 0;
    let timeLeft = 30;
    let gameInterval = null;
    let moleInterval = null;
    let gameActive = false;
    let hiscore = 0;

    // robust localStorage (some sandboxes block it)
    try {
      hiscore = Number(localStorage.getItem('wam_hiscore') || 0);
    } catch(_) { hiscore = 0; }
    hiscoreEl.textContent = hiscore;

    function gridByDifficulty(diff){ return diff === 'insane' ? 'x4' : 'x3'; }

    function timingsByDifficulty(diff){
      switch(diff){
        case 'easy': return {pop: 1100, gap: 950};
        case 'normal': return {pop: 900, gap: 750};
        case 'hard': return {pop: 750, gap: 620};
        case 'insane': return {pop: 620, gap: 520};
        default: return {pop: 900, gap: 750};
      }
    }

    function buildGrid(){
      game.innerHTML = '';
      const gridClass = gridByDifficulty(difficultySel.value);
      game.className = `grid ${gridClass}`;
      const holesCount = gridClass === 'x4' ? 16 : 9;
      for (let i = 0; i < holesCount; i++) {
        const hole = document.createElement('button');
        hole.type = 'button';
        hole.className = 'hole';
        hole.setAttribute('aria-label', 'Mole hole');
        const mole = document.createElement('div');
        mole.className = 'mole';
        mole.innerHTML = `
          <div class="face">
            <div class="eye left"><div class="shine"></div></div>
            <div class="eye right"><div class="shine"></div></div>
            <div class="nose"></div>
            <div class="tooth"></div>
            <div class="paw left"></div>
            <div class="paw right"></div>
          </div>
        `;
        // Faster on mobile: pointerdown
        mole.addEventListener('pointerdown', onHit);
        hole.appendChild(mole);
        game.appendChild(hole);
      }
    }

    function onHit(e){
      if(!gameActive) return;
      const mole = e.currentTarget;
      if(!mole.classList.contains('up')) return;
      score++;
      scoreDisplay.textContent = score;
      const flash = document.createElement('div');
      flash.className = 'hitFlash';
      mole.appendChild(flash);
      setTimeout(()=> flash.remove(), 120);
      mole.classList.remove('up');
    }

    function randomMole(){
      const moles = document.querySelectorAll('.mole');
      if(!moles.length) return;
      const idx = Math.floor(Math.random() * moles.length);
      const mole = moles[idx];
      const { pop } = timingsByDifficulty(difficultySel.value);
      mole.classList.add('up');
      setTimeout(() => mole.classList.remove('up'), pop);
    }

    function startLoops(){
      const { gap } = timingsByDifficulty(difficultySel.value);
      moleInterval = setInterval(randomMole, gap);
      gameInterval = setInterval(() => {
        timeLeft--;
        timerDisplay.textContent = timeLeft;
        if (timeLeft <= 0) endGame();
      }, 1000);
    }

    function startGame(){
      score = 0; scoreDisplay.textContent = score;
      timeLeft = 30; timerDisplay.textContent = timeLeft;
      gameActive = true;
      startBtn.style.display = 'none';
      restartBtn.style.display = '';
      gameoverScreen.style.display = 'none';
      buildGrid();
      startLoops();
    }

    function endGame(){
      clearInterval(moleInterval); clearInterval(gameInterval);
      moleInterval = gameInterval = null; gameActive = false;
      try {
        if(score > hiscore){ hiscore = score; localStorage.setItem('wam_hiscore', String(hiscore)); }
      } catch(_) {/* ignore */}
      hiscoreEl.textContent = hiscore;
      finalScore.textContent = `Game Over! üéâ Your Score: ${score}`;
      gameoverScreen.style.display = 'flex';
    }

    function restart(){
      clearInterval(moleInterval); clearInterval(gameInterval);
      moleInterval = gameInterval = null; gameActive = false;
      startGame();
    }

    // Container delegation (fallback for some browsers)
    game.addEventListener('pointerdown', (ev)=>{
      const mole = ev.target.closest && ev.target.closest('.mole');
      if(mole) onHit({ currentTarget: mole });
    });

    startBtn.addEventListener('click', startGame);
    restartBtn.addEventListener('click', restart);
    playAgain.addEventListener('click', restart);

    difficultySel.addEventListener('change', ()=>{ if(!gameActive) buildGrid(); });
    scaleRange.addEventListener('input', ()=>{ document.documentElement.style.setProperty('--cellMin', scaleRange.value + 'px'); });

    // Initial grid & mobile default size tweak
    if (Math.min(window.innerWidth, window.innerHeight) < 380) {
      document.documentElement.style.setProperty('--cellMin', '72px');
    }
    buildGrid();
  </script></body>
</html>